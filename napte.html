<!DOCTYPE html>
<html lang="vi">
<head>
    <link rel="icon" type="image/x-icon" href="img_src/icon_server.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N·∫°p ATM/QR | N·∫°p Th·∫ª SkyHunter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#0a0d1b',
                        'secondary-dark': '#1c2135',
                        'accent-blue': '#4c7cff',
                        'accent-gold': '#ffcc00',
                        'promo-red': '#ff4c4c',
                        'bidv-green': '#006C5B',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'slide-up': 'slide-up 0.5s ease-out',
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'pulse-glow': {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(255, 204, 0, 0.3)' },
                            '50%': { boxShadow: '0 0 40px rgba(255, 204, 0, 0.6)' },
                        },
                        'slide-up': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        },
                    },
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <style>
        body {
            background: linear-gradient(135deg, #0a0d1b 0%, #1a1d35 50%, #0a0d1b 100%);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Particles background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(76, 124, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 204, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 76, 76, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .glass-effect {
            background: rgba(28, 33, 53, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glow-shadow-gold {
            box-shadow: 0 0 30px rgba(255, 204, 0, 0.3), 0 0 60px rgba(255, 204, 0, 0.1);
        }

        .glow-shadow-blue {
            box-shadow: 0 0 30px rgba(76, 124, 255, 0.3), 0 0 60px rgba(76, 124, 255, 0.1);
        }

        .glow-shadow-red {
            box-shadow: 0 0 30px rgba(255, 76, 76, 0.3), 0 0 60px rgba(255, 76, 76, 0.1);
        }

        .custom-input {
            background: rgba(10, 13, 27, 0.8);
            border: 2px solid rgba(76, 124, 255, 0.3);
            transition: all 0.3s ease;
        }

        .custom-input:focus {
            outline: none;
            border-color: #4c7cff;
            box-shadow: 0 0 20px rgba(76, 124, 255, 0.4);
            transform: translateY(-2px);
        }

        .custom-input:hover {
            border-color: rgba(76, 124, 255, 0.5);
        }

        .quantity-input {
            -moz-appearance: textfield;
            background: rgba(10, 13, 27, 0.9);
            transition: all 0.2s;
            border: none; /* B·ªè border tr√™n input ƒë·ªÉ border n·∫±m ·ªü div bao ngo√†i */
        }
        
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-input:focus {
            outline: none;
        }

        .quantity-control-btn {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            line-height: 1;
            font-weight: bold;
            color: #0a0d1b;
            background-color: #ffcc00;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quantity-control-btn:hover {
            background-color: #ffde59;
            transform: scale(1.05);
        }

        .package-row {
            transition: all 0.3s ease;
            position: relative;
        }

        .package-row::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: linear-gradient(180deg, #4c7cff, #ffcc00);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .package-row:hover {
            background: rgba(76, 124, 255, 0.1);
            transform: translateX(5px);
        }

        .package-row:hover::before {
            transform: scaleY(1);
        }

        .shimmer-text {
            background: linear-gradient(90deg, #fff 0%, #ffcc00 50%, #fff 100%);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }

        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, rgba(76, 124, 255, 0.1), rgba(255, 204, 0, 0.1));
            border: 2px solid transparent;
        }

        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 2px;
            background: linear-gradient(135deg, #4c7cff, #ffcc00, #ff4c4c);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        .promo-badge {
            background: linear-gradient(135deg, #ff4c4c, #ff6b6b);
            box-shadow: 0 4px 15px rgba(255, 76, 76, 0.4);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .crystal-icon {
            filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.6));
            animation: float 3s ease-in-out infinite;
        }

        .header-logo {
            transition: all 0.3s ease;
        }

        .header-logo:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 0 20px rgba(255, 204, 0, 0.8));
        }

        .btn-generate {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn-generate::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-generate:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-generate:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(76, 124, 255, 0.5);
        }

        .info-card {
            transition: all 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 108, 91, 0.3);
        }

        .qr-container {
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slide-up 0.5s ease-out;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(76, 124, 255, 0.1) 0%, rgba(255, 204, 0, 0.1) 100%);
            border: 2px solid rgba(255, 204, 0, 0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
            border-color: rgba(255, 204, 0, 0.5);
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0d1b;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #4c7cff, #ffcc00);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #ffcc00, #ff4c4c);
        }
        
        /* Mobile Specific Adjustments */
        @media (max-width: 768px) {
            .shimmer-text {
                font-size: 2rem; /* Gi·∫£m k√≠ch th∆∞·ªõc font title tr√™n mobile */
            }
            .header-logo {
                width: 48px;
                height: 48px;
            }
            .btn-generate {
                font-size: 1.125rem; /* Gi·∫£m k√≠ch th∆∞·ªõc font button */
            }
            .qr-container-mobile {
                width: 12rem; /* Gi·∫£m k√≠ch th∆∞·ªõc QR code */
                height: 12rem;
            }
            .info-text-mobile {
                font-size: 1.25rem; /* ƒêi·ªÅu ch·ªânh font text quan tr·ªçng */
            }
            .table-scroll-wrapper {
                overflow-x: auto; /* Cho ph√©p cu·ªôn ngang b·∫£ng */
            }
        }
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="text-white font-sans min-h-screen flex flex-col items-center relative">

    <header class="w-full glass-effect shadow-2xl border-b border-accent-gold/30 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-3 relative flex items-center justify-center">
            
            <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
                <a href="index.html" class="flex items-center space-x-1 md:space-x-2 text-slate-300 hover:text-accent-gold transition duration-300 group">
                    <img src="img_src/icon_server.png" 
                onerror="this.onerror=null; this.src='https://placehold.co/48x48/ffcc00/0a0d1b?text=SH';"
                alt="Server Icon" 
                class="header-logo w-12 h-12 md:w-16 md:h-16 object-cover rounded-full shadow-lg border-2 border-accent-gold">
                    <span class="text-base md:text-lg font-bold hidden sm:inline group-hover:translate-x-1 transition-transform">‚á¶ Trang Ch·ªß</span>
                </a>
            </div>
            
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold shimmer-text text-center">NAPTHE SKYHUNTER</h1>
        </div>
    </header>

    <main class="max-w-6xl w-full mx-auto p-4 md:p-8 flex-grow mt-4 md:mt-8 relative z-10">
        
        <div class="text-center mb-6 md:mb-8 animate-slide-up">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-bidv-green via-accent-blue to-accent-gold mb-3">
                CH·ªåN S·ªê L∆Ø·ª¢NG G√ìI N·∫†P
            </h2>
            <p class="text-base md:text-lg text-slate-300 mb-4">N·∫°p t·ª´ <span class="text-accent-gold font-bold">200.000 VNƒê</span> nh·∫≠n <span class="text-promo-red font-bold">10% Pha L√™</span>. T·ª´ <span class="text-accent-gold font-bold">500.000 VNƒê</span> nh·∫≠n ngay <span class="text-promo-red font-bold">20% Pha L√™!</span></p>
            
            <div class="flex justify-center gap-3 md:gap-4 flex-wrap text-sm md:text-base">
                <div class="promo-badge px-4 py-2 md:px-6 md:py-3 rounded-full text-white font-bold">
                    <i class="fas fa-fire mr-1 md:mr-2"></i>HOT DEAL
                </div>
                <div class="stat-card px-4 py-2 md:px-6 md:py-3 rounded-full font-bold">
                    <i class="fas fa-users mr-1 md:mr-2"></i>1000+ Ng∆∞·ªùi Ch∆°i Tin T√πng
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
            
            <div class="lg:col-span-1 glass-effect p-5 md:p-6 rounded-2xl shadow-2xl glow-shadow-blue h-fit order-2 lg:order-1 animate-slide-up">
                <div class="flex items-center justify-between mb-5 border-b border-accent-blue/30 pb-3">
                    <h3 class="text-xl md:text-2xl font-bold text-accent-blue">B∆Ø·ªöC 1: TH√îNG TIN</h3>
                    <div class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-accent-blue/20 flex items-center justify-center">
                        <span class="text-accent-blue font-bold text-lg md:text-xl">1</span>
                    </div>
                </div>
                
                <form id="depositForm" class="space-y-4 md:space-y-5">
                    
                    <div>
                        <label for="username" class="block text-base md:text-lg font-semibold text-white mb-2 md:mb-3 flex items-center">
                            <i class="fas fa-user mr-2 text-accent-blue"></i>
                            T√™n T√†i Kho·∫£n (In-game Name)
                        </label>
                        <input type="text" id="username" name="username" required
                            class="custom-input w-full p-3 md:p-4 rounded-xl text-base md:text-lg placeholder-slate-500"
                            placeholder="Nh·∫≠p t√™n t√†i kho·∫£n c·ªßa b·∫°n"
                            pattern="[A-Za-z0-9_]{3,16}"
                            oninput="updateTransferContent()"> 
                        <p class="text-sm text-red-400 mt-2 flex items-center" id="usernameError"></p>
                    </div>

                    <div class="info-card glass-effect p-4 md:p-5 rounded-xl border border-bidv-green/50 glow-shadow-blue">
                        <h4 class="text-lg md:text-xl font-bold text-accent-gold mb-3 flex items-center">
                            <i class="fas fa-university mr-2"></i>
                            Th√¥ng tin t√†i kho·∫£n nh·∫≠n
                        </h4>
                        <div class="space-y-2 text-slate-200 text-sm md:text-base">
                            <p class="flex items-center"><i class="fas fa-building w-5 text-bidv-green"></i> Ng√¢n h√†ng: <span class="font-bold ml-2">BIDV</span></p>
                            <p class="flex items-center"><i class="fas fa-credit-card w-5 text-bidv-green"></i> S·ªë TK: <span class="text-bidv-green font-bold ml-2" id="accountNoDisplay">8890956287</span></p>
                            <p class="flex items-center"><i class="fas fa-user-circle w-5 text-bidv-green"></i> Ch·ªß TK: <span class="text-bidv-green font-bold ml-2" id="accountNameDisplay">DOAN CHI BAO</span></p>
                        </div>
                        <div class="mt-4 p-3 bg-yellow-500/10 rounded-lg border border-yellow-400/30">
                            <p class="text-xs md:text-sm text-yellow-400 flex items-start">
                                <i class="fas fa-exclamation-triangle mt-1 mr-2"></i>
                                <span>Vui l√≤ng ƒë·∫£m b·∫£o S·ªë T√†i Kho·∫£n n√†y l√† c·ªßa BIDV.</span>
                            </p>
                        </div>
                    </div>

                    <div class="mt-6">
                        <button type="button" onclick="generateQR()"
                            class="btn-generate w-full bg-gradient-to-r from-accent-blue to-blue-600 hover:from-blue-600 hover:to-accent-blue text-white text-lg md:text-xl font-bold py-3 md:py-4 rounded-xl transition duration-300 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed relative z-10"
                            id="generateQrButton" disabled>
                            <i class="fas fa-qrcode mr-2"></i>
                            B∆Ø·ªöC 2: T·∫†O M√É QR CHUY·ªÇN KHO·∫¢N
                        </button>
                    </div>

                </form>

            </div>

            <div class="lg:col-span-2 glass-effect p-5 md:p-6 rounded-2xl shadow-2xl gradient-border glow-shadow-gold order-1 lg:order-2 animate-slide-up">
                <div class="text-center mb-5">
                    <h3 class="text-2xl md:text-3xl lg:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-promo-red via-accent-gold to-promo-red mb-2">
                        CH·ªåN G√ìI N·∫†P
                    </h3>
                    <p class="text-slate-400 text-sm md:text-base">Nh·∫≠p s·ªë l∆∞·ª£ng g√≥i b·∫°n mu·ªën mua</p>
                </div>
                
                <div class="overflow-x-auto table-scroll-wrapper"> 
                    <table class="min-w-full text-left text-sm font-light table-auto">
                        <thead class="border-b-2 font-medium border-accent-gold/50 text-accent-gold">
                            <tr>
                                <th scope="col" class="px-2 md:px-4 py-3 text-sm md:text-base"><i class="fas fa-coins mr-1 md:mr-2"></i>M·ªánh Gi√°</th>
                                <th scope="col" class="px-2 md:px-4 py-3 text-sm md:text-base"><i class="fas fa-gem mr-1 md:mr-2"></i>Pha L√™ G·ªëc</th>
                                <th scope="col" class="px-2 md:px-4 py-3 text-sm md:text-base text-center"><i class="fas fa-shopping-cart mr-1 md:mr-2"></i>SL</th>
                                <th scope="col" class="px-2 md:px-4 py-3 text-sm md:text-base text-right"><i class="fas fa-calculator mr-1 md:mr-2"></i>T·∫°m T√≠nh</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="package-row border-b border-slate-700/50" data-price="10000" data-crystal="1">
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 font-semibold text-white text-sm">10.000 VNƒê</td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-accent-gold font-bold flex items-center text-sm">
                                    <i class="fas fa-gem mr-1 md:mr-2"></i>1
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-lg overflow-hidden w-28 md:w-32 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-1 text-center text-sm" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-right text-accent-blue font-bold text-sm" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/50" data-price="50000" data-crystal="5">
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 font-semibold text-white text-sm">50.000 VNƒê</td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-accent-gold font-bold flex items-center text-sm">
                                    <i class="fas fa-gem mr-1 md:mr-2"></i>5
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-lg overflow-hidden w-28 md:w-32 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-1 text-center text-sm" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-right text-accent-blue font-bold text-sm" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/50" data-price="100000" data-crystal="10">
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 font-semibold text-white text-sm">100.000 VNƒê</td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-accent-gold font-bold flex items-center text-sm">
                                    <i class="fas fa-gem mr-1 md:mr-2"></i>10
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-lg overflow-hidden w-28 md:w-32 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-1 text-center text-sm" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-right text-accent-blue font-bold text-sm" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/50" data-price="200000" data-crystal="20">
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 font-semibold text-white text-sm">
                                    200.000 VNƒê
                                    <span class="ml-1 text-xs bg-yellow-500/20 text-yellow-400 px-1 py-0.5 rounded-full">+10%</span>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-accent-gold font-bold flex items-center text-sm">
                                    <i class="fas fa-gem mr-1 md:mr-2"></i>20
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-lg overflow-hidden w-28 md:w-32 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-1 text-center text-sm" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-right text-accent-blue font-bold text-sm" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/50" data-price="500000" data-crystal="50">
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 font-semibold text-white text-sm">
                                    500.000 VNƒê
                                    <span class="ml-1 text-xs bg-red-500/20 text-red-400 px-1 py-0.5 rounded-full">+20%</span>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-accent-gold font-bold flex items-center text-sm">
                                    <i class="fas fa-gem mr-1 md:mr-2"></i>50
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-lg overflow-hidden w-28 md:w-32 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-1 text-center text-sm" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-2 md:px-4 py-3 md:py-4 text-right text-accent-blue font-bold text-sm" data-temp-price>0 VNƒê</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mt-5 glass-effect p-4 md:p-6 rounded-xl border-2 border-accent-gold/50 glow-shadow-gold">
                    <div class="flex justify-between items-center text-lg md:text-xl font-semibold py-2 md:py-3 border-b border-slate-700/50">
                        <span class="flex items-center"><i class="fas fa-money-bill-wave mr-2 text-accent-blue"></i>T·ªïng Ti·ªÅn N·∫°p:</span>
                        <span id="totalAmountDisplay" class="text-accent-blue font-bold text-xl md:text-2xl">0 VNƒê</span>
                    </div>
                    <div class="flex justify-between items-center text-lg md:text-xl font-semibold py-2 md:py-3 border-b border-slate-700/50">
                        <span class="flex items-center"><i class="fas fa-gem mr-2 text-accent-gold"></i>Pha L√™ G·ªëc:</span>
                        <span id="baseCrystalContainer" class="text-accent-gold font-bold text-xl md:text-2xl">
                            <span id="baseCrystalDisplay">0</span> Pha L√™
                        </span>
                    </div>

                    <div id="promoSection" class="hidden">
                         <div class="flex justify-between items-center text-base md:text-lg font-medium py-3 bg-promo-red/10 rounded-lg px-4 my-2">
                            <span class="flex items-center"><i class="fas fa-gift mr-2 text-promo-red"></i>Khuy·∫øn M√£i (<span id="promoPercentDisplay">0%</span>):</span>
                            <span id="promoCrystalContainer" class="text-promo-red font-bold">
                                + <span id="promoCrystalDisplay">0</span> Pha L√™
                            </span>
                        </div>
                    </div>
                    
                <div class="flex justify-between text-2xl md:text-3xl font-extrabold pt-3">
                        <span>T·ªîNG PHA L√ä NH·∫¨N:</span>
                        <span id="finalCrystalContainer" class="text-promo-red flex items-center space-x-1 md:space-x-2">
                            <span id="finalCrystalDisplay">0</span>
                            <img src="img_src/phalevip.png" 
                            onerror="this.onerror=null; this.src='https://placehold.co/28x28/ffcc00/0a0d1b?text=üíé';"
                            alt="Pha L√™" class="h-6 w-6 md:h-7 md:w-7 object-contain">
                        </span>
                    </div>
                </div>

            </div>
        </div>

        <div id="qrCodeSection" class="mt-8 md:mt-10 p-6 md:p-8 bg-secondary-dark rounded-xl shadow-2xl border-2 border-bidv-green/50 hidden">
            <h3 class="text-2xl md:text-3xl font-bold text-promo-red text-center mb-5 md:mb-6">B∆Ø·ªöC 3: QU√âT M√É V√Ä CHUY·ªÇN KHO·∫¢N</h3>
            
            <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-8">
                <div class="w-48 h-48 md:w-64 md:h-64 border-4 border-accent-gold rounded-lg p-2 bg-white flex items-center justify-center qr-container-mobile" id="qrContainer">
                    </div>
                
                <div class="text-left space-y-3 w-full md:w-auto">
                    <p class="text-lg md:text-xl font-semibold text-white">S·ªë ti·ªÅn c·∫ßn chuy·ªÉn:</p>
                    <p class="text-3xl md:text-4xl font-extrabold text-promo-red info-text-mobile" id="transferAmount">0 VNƒê</p>
                    
                    <p class="text-lg md:text-xl font-semibold text-white mt-4">N·ªôi dung chuy·ªÉn kho·∫£n **(C·ª±c k·ª≥ quan tr·ªçng)**:</p>
                    <div class="overflow-x-auto">
                        <p class="text-xl md:text-2xl font-extrabold text-red-400 bg-primary-dark p-3 rounded-lg border border-red-400 inline-block" id="transferContent">
                            Vui l√≤ng nh·∫≠p T√™n T√†i Kho·∫£n
                        </p>
                    </div>
                    <p class="text-xs md:text-sm text-red-500 mt-2">Tuy·ªát ƒë·ªëi **KH√îNG CH·ªàNH S·ª¨A** n·ªôi dung. M√£ n√†y l√† duy nh·∫•t cho giao d·ªãch c·ªßa b·∫°n.</p>
                </div>
            </div>
        </div>

    </main>

    <footer class="w-full bg-secondary-dark border-t border-accent-gold/20 py-4 mt-auto">
        <div class="max-w-6xl mx-auto px-4 text-center text-slate-400 text-xs md:text-sm">
            <p>&copy; 2025 C·ª≠a H√†ng SkyHunter. TK BIDV: <span id="footerAccountNo">8890956287</span> <span id="footerAccountName">DOAN CHI BAO</span>. M√£ QR c√≥ hi·ªáu l·ª±c trong 30 ph√∫t.</p>
        </div>
    </footer>

    <script>
    const BANK_ID = 'BIDV';
    const ACCOUNT_NO = '8890956287';
    const ACCOUNT_NAME = 'DOAN CHI BAO';
    const PREFIX = 'NapPlayer';

    const PROMO_THRESHOLD_500K = 500000;
    const PROMO_PERCENT_500K = 0.20;

    const PROMO_THRESHOLD_200K = 200000;
    const PROMO_PERCENT_200K = 0.10;

    document.getElementById('accountNoDisplay').textContent = ACCOUNT_NO;
    document.getElementById('accountNameDisplay').textContent = ACCOUNT_NAME;
    document.getElementById('footerAccountNo').textContent = ACCOUNT_NO;
    document.getElementById('footerAccountName').textContent = ACCOUNT_NAME;

    const usernameInput = document.getElementById('username');
    const generateQrButton = document.getElementById('generateQrButton');
    const usernameError = document.getElementById('usernameError');
    const packageRows = document.querySelectorAll('tbody tr');
    const qrContainer = document.getElementById('qrContainer');
    const qrSection = document.getElementById('qrCodeSection');


    const baseCrystalContainer = document.getElementById('baseCrystalContainer');
    const promoCrystalContainer = document.getElementById('promoCrystalContainer');
    const finalCrystalDisplay = document.getElementById('finalCrystalDisplay');


    let totalAmount = 0;
    let finalContent = '';
    let finalCrystalGlobal = 0;

    function formatVND(amount) {
        return Number(amount).toLocaleString('vi-VN') + ' VNƒê';
    }

    /**
     * TƒÉng s·ªë l∆∞·ª£ng c·ªßa input li√™n quan.
     * @param {HTMLElement} button - N√∫t (+) ƒë∆∞·ª£c nh·∫•n.
     */
    function increaseQuantity(button) {
        // T√¨m input g·∫ßn nh·∫•t v·ªõi n√∫t n√†y (input li·ªÅn k·ªÅ)
        const input = button.parentNode.querySelector('input[type="number"]');
        let quantity = parseInt(input.value) || 0;
        input.value = quantity + 1;
        calculateTotal();
    }

    /**
     * Gi·∫£m s·ªë l∆∞·ª£ng c·ªßa input li√™n quan.
     * @param {HTMLElement} button - N√∫t (-) ƒë∆∞·ª£c nh·∫•n.
     */
    function decreaseQuantity(button) {
        const input = button.parentNode.querySelector('input[type="number"]');
        let quantity = parseInt(input.value) || 0;
        if (quantity > 0) {
            input.value = quantity - 1;
            calculateTotal();
        }
    }


    function calculateTotal() {
        totalAmount = 0;
        let baseCrystal = 0;

        packageRows.forEach(row => {
            const price = parseInt(row.getAttribute('data-price'));
            const crystal = parseInt(row.getAttribute('data-crystal'));
            const quantityInput = row.querySelector('input[type="number"]');
            let quantity = parseInt(quantityInput.value) || 0;

            if (quantity < 0) {
                quantity = 0;
                quantityInput.value = 0;
            }

            const tempPrice = price * quantity;
            const tempCrystal = crystal * quantity;

            totalAmount += tempPrice;
            baseCrystal += tempCrystal;

            row.querySelector('[data-temp-price]').textContent = formatVND(tempPrice);
        });

        let promoCrystal = 0;
        let promoPercent = 0;

        if (totalAmount >= PROMO_THRESHOLD_500K) {
            promoPercent = PROMO_PERCENT_500K;
        } else if (totalAmount >= PROMO_THRESHOLD_200K) {
            promoPercent = PROMO_PERCENT_200K;
        }

        if (promoPercent > 0) {
            promoCrystal = Math.floor(baseCrystal * promoPercent);
            document.getElementById('promoSection').classList.remove('hidden');
            document.getElementById('promoPercentDisplay').textContent = `${Math.round(promoPercent * 100)}%`;
        } else {
            document.getElementById('promoSection').classList.add('hidden');
            document.getElementById('promoPercentDisplay').textContent = `0%`;
        }

        const finalCrystal = baseCrystal + promoCrystal;
        finalCrystalGlobal = finalCrystal; 

        document.getElementById('totalAmountDisplay').textContent = formatVND(totalAmount);
        

        baseCrystalContainer.innerHTML = `<span id="baseCrystalDisplay">${baseCrystal.toLocaleString('vi-VN')}</span> Pha L√™`;
        
        promoCrystalContainer.innerHTML = `+ <span id="promoCrystalDisplay">${promoCrystal.toLocaleString('vi-VN')}</span> Pha L√™`;
        finalCrystalDisplay.textContent = finalCrystal.toLocaleString('vi-VN');

        // G·ªåI H√ÄM C·∫¨P NH·∫¨T N·ªòI DUNG CHUY·ªÇN KHO·∫¢N V√Ä TR·∫†NG TH√ÅI N√öT SAU KHI T√çNH T·ªîNG TI·ªÄN
        updateTransferContent(); 
    }

    function updateTransferContent() {
        const username = usernameInput.value.trim();
        // Bi·ªÉu th·ª©c ch√≠nh quy cho t√™n ng∆∞·ªùi d√πng: 3-16 k√Ω t·ª±, ch·ªâ ch·ª©a ch·ªØ, s·ªë, g·∫°ch d∆∞·ªõi.
        const isValidUsername = /^[A-Za-z0-9_]{3,16}$/.test(username); 

        // Ki·ªÉm tra ƒëi·ªÅu ki·ªán: T·ªïng ti·ªÅn > 0 V√Ä T√™n t√†i kho·∫£n h·ª£p l·ªá
        if (totalAmount > 0 && isValidUsername) {

            // C·∫≠p nh·∫≠t n·ªôi dung chuy·ªÉn kho·∫£n m·ªõi
            finalContent = `${PREFIX}.....${username}.....${finalCrystalGlobal}`;
            document.getElementById('transferContent').textContent = finalContent;
            generateQrButton.disabled = false; // K√≠ch ho·∫°t n√∫t
            usernameError.textContent = '';
        } else if (!isValidUsername && username.length > 0) {
            // T√™n kh√¥ng h·ª£p l·ªá
            document.getElementById('transferContent').textContent = 'T√™n T√†i Kho·∫£n kh√¥ng h·ª£p l·ªá';
            usernameError.textContent = 'T√™n t√†i kho·∫£n kh√¥ng h·ª£p l·ªá (3-16 k√Ω t·ª±, ch·ªâ ch·ª©a ch·ªØ, s·ªë, g·∫°ch d∆∞·ªõi).';
            generateQrButton.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t
            qrSection.classList.add('hidden');
        } else {
            // T·ªïng ti·ªÅn = 0 ho·∫∑c t√™n tr·ªëng/ch∆∞a ho√†n th√†nh
            document.getElementById('transferContent').textContent = (isValidUsername && totalAmount === 0) 
                ? 'Vui l√≤ng ch·ªçn g√≥i n·∫°p' 
                : 'Vui l√≤ng nh·∫≠p T√™n T√†i Kho·∫£n';
            usernameError.textContent = '';
            generateQrButton.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t
            qrSection.classList.add('hidden');
        }
    }

    function generateQR() {
        if (totalAmount === 0 || generateQrButton.disabled) {
            alert("Vui l√≤ng ch·ªçn g√≥i n·∫°p v√† nh·∫≠p t√™n t√†i kho·∫£n h·ª£p l·ªá.");
            return;
        }

        const content = finalContent;

        const qrUrl =
            `https://img.vietqr.io/image/${BANK_ID}-${ACCOUNT_NO}-compact.png?amount=${totalAmount}&addInfo=${encodeURIComponent(content)}&accountName=${encodeURIComponent(ACCOUNT_NAME)}`;

        qrContainer.innerHTML = ''; 

        const newQrImage = document.createElement('img');
        newQrImage.id = 'qrImage';
        newQrImage.src = qrUrl;
        newQrImage.alt = 'QR Chuy·ªÉn Kho·∫£n';
        newQrImage.className = 'w-full h-full object-contain';
        newQrImage.style.display = 'block';

        qrContainer.appendChild(newQrImage);
        qrContainer.classList.add('bg-white', 'p-2');
        qrContainer.classList.remove('flex', 'items-center', 'justify-center');

        document.getElementById('transferAmount').textContent = formatVND(totalAmount);
        qrSection.classList.remove('hidden');

        qrSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    document.addEventListener('DOMContentLoaded', () => {
        calculateTotal();
        
        usernameInput.addEventListener('input', updateTransferContent);
    });
</script>
</body>
</html>