<!DOCTYPE html>
<html lang="vi">
<head>
    <link rel="icon" type="image/x-icon" href="img_src/icon_server.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N·∫°p ATM/QR | N·∫°p Th·∫ª SkyHunter - N√¢ng C·∫•p</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // M√†u s·∫Øc m·ªõi v√† c·∫•u h√¨nh Tailwind
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#0d111c', // N·ªÅn t·ªëi h∆°n
                        'secondary-dark': '#1e2637', // N·ªÅn kh·ªëi ph·ª•
                        'accent-blue': '#5c95ff', // Blue s√°ng h∆°n, b·∫Øt m·∫Øt h∆°n
                        'accent-gold': '#ffcc00', // V√†ng ch·ªß ƒë·∫°o
                        'promo-red': '#ff5a5a', // ƒê·ªè khuy·∫øn m√£i
                        'bidv-green': '#008c73', // Xanh BIDV s√°ng h∆°n
                        'event-bg': '#30184b', 
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'slide-up': 'slide-up 0.5s ease-out',
                        'shimmer': 'shimmer 2s linear infinite',
                        'pulse-event': 'pulse-event 1.5s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'pulse-glow': {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(255, 204, 0, 0.4)' },
                            '50%': { boxShadow: '0 0 40px rgba(255, 204, 0, 0.8)' },
                        },
                        'slide-up': {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        },
                        'pulse-event': {
                            '0%, 100%': { opacity: '1', transform: 'scale(1)' },
                            '50%': { opacity: '0.95', transform: 'scale(1.02)' },
                        },
                    },
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <style>
        /* Thay ƒë·ªïi m√†u n·ªÅn t·ªïng th·ªÉ */
        body {
            background: linear-gradient(135deg, #0d111c 0%, #1a2033 50%, #0d111c 100%);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Particles background - m√†u s·∫Øc n·ªïi b·∫≠t h∆°n */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(92, 149, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 204, 0, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 90, 90, 0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Hi·ªáu ·ª©ng Glass/M·ªù */
        .glass-effect {
            background: rgba(30, 38, 55, 0.9); /* ƒê·ªô m·ªù cao h∆°n */
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        /* B√≥ng ƒë·ªï s√°ng */
        .glow-shadow-gold {
            box-shadow: 0 0 40px rgba(255, 204, 0, 0.5), 0 0 80px rgba(255, 204, 0, 0.2);
        }

        .glow-shadow-blue {
            box-shadow: 0 0 40px rgba(92, 149, 255, 0.5), 0 0 80px rgba(92, 149, 255, 0.2);
        }

        /* Input t√πy ch·ªânh */
        .custom-input {
            background: rgba(13, 17, 28, 0.9);
            border: 2px solid rgba(92, 149, 255, 0.4);
            transition: all 0.3s ease;
            color: #fff;
        }

        .custom-input:focus {
            outline: none;
            border-color: #5c95ff;
            box-shadow: 0 0 20px rgba(92, 149, 255, 0.6);
        }

        /* H√†ng g√≥i n·∫°p */
        .package-row {
            transition: all 0.3s ease;
            position: relative;
        }

        .package-row:hover {
            background: rgba(92, 149, 255, 0.15); /* M√†u hover n·ªïi h∆°n */
        }
        
        /* Text l·∫•p l√°nh */
        .shimmer-text {
            background: linear-gradient(90deg, #ffffff 0%, #ffcc00 50%, #ffffff 100%);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }

        /* N√∫t QR */
        .btn-generate {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn-generate:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(92, 149, 255, 0.6);
        }

        /* Banner khuy·∫øn m√£i ch·∫°y ch·ªØ */
        .promo-banner {
            background: linear-gradient(90deg, #ff5a5a, #ffcc00, #ff5a5a);
            background-size: 200% 100%;
            animation: shimmer 4s linear infinite;
        }

        /* Container QR */
        .qr-container {
            background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);
            padding: 1.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            animation: slide-up 0.5s ease-out;
        }

        /* Card s·ª± ki·ªán */
        .event-card {
            position: relative;
            overflow: hidden;
            background: #151927; 
        }
        
        /* Vi·ªÅn xoay card s·ª± ki·ªán */
        .event-card-border::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 1.25rem;
            padding: 3px;
            background: conic-gradient(from 0deg, #ff5a5a, #ffcc00, #5c95ff, #ff5a5a);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: rotate 8s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* N√∫t ƒëi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng */
        .quantity-control-btn {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            line-height: 1;
            font-weight: bold;
            color: #0d111c;
            background-color: #ffcc00;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quantity-control-btn:hover {
            background-color: #ffde59;
            transform: scale(1.1);
        }
        
        /* Input s·ªë l∆∞·ª£ng */
        .quantity-input {
            background: transparent !important; /* Lo·∫°i b·ªè n·ªÅn input trong n√∫t */
            border: none !important;
        }
        
        /* N·ªôi dung chuy·ªÉn kho·∫£n */
        #transferContent {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="text-white font-sans min-h-screen flex flex-col items-center relative">

    <header class="w-full glass-effect shadow-2xl border-b border-accent-gold/50 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 relative flex items-center justify-center">
            
            <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
                <a href="index.html" class="flex items-center space-x-1 md:space-x-2 text-slate-300 hover:text-accent-gold transition duration-300 group">
                    <img src="img_src/icon_server.png" 
                onerror="this.onerror=null; this.src='https://placehold.co/48x48/ffcc00/0d111c?text=SH';"
                alt="Server Icon" 
                class="header-logo w-14 h-14 object-cover rounded-full shadow-lg border-2 border-accent-gold group-hover:scale-105">
                    <span class="text-base md:text-lg font-bold hidden sm:inline group-hover:text-accent-blue transition-colors">‚á¶ Trang Ch·ªß</span>
                </a>
            </div>
            
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold shimmer-text text-center tracking-wider">NAPTHE SKYHUNTER</h1>
        </div>
    </header>

    <main class="max-w-7xl w-full mx-auto p-4 md:p-8 flex-grow mt-6 md:mt-10 relative z-10">
        
        <div class="mb-10 md:mb-12 animate-slide-up event-card p-5 md:p-6 rounded-3xl shadow-2xl event-card-border overflow-hidden">
            <h2 class="text-3xl md:text-4xl font-extrabold text-center mb-5 pb-3 border-b-2 border-accent-gold/50 text-accent-gold flex items-center justify-center">
                <i class="fas fa-bullhorn mr-3 text-promo-red animate-pulse-event"></i> S·ª∞ KI·ªÜN N·∫†P ƒêANG DI·ªÑN RA!
            </h2>
            
            <div class="text-center mb-5 p-4 bg-promo-red/15 rounded-xl border border-promo-red/70 shadow-lg shadow-promo-red/20">
                <p class="text-lg md:text-xl font-bold text-promo-red mb-3 border-b border-promo-red/50 pb-2">
                    <i class="fas fa-calendar-alt mr-2"></i> TH·ªúI GIAN: 5/12 - 15/12
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-left">
                    <div class="p-3 bg-secondary-dark/50 rounded-lg">
                        <p class="text-xl font-extrabold text-accent-gold mb-3 flex items-center justify-center md:justify-start">
                            <i class="fas fa-star mr-2 text-promo-red"></i> EVENT ƒê·∫∂C BI·ªÜT (Key)
                        </p>
                        <ul class="list-none space-y-2 text-slate-200 text-sm md:text-base pl-0">
                            <li class="flex items-center"><i class="fas fa-key mr-2 text-yellow-400"></i> **N·∫°p 100K**: nh·∫≠n ngay <span class="font-bold text-white ml-1">x30 Key Cao C·∫•p</span></li>
                            <li class="flex items-center"><i class="fas fa-key mr-2 text-yellow-400"></i> **N·∫°p 200K**: nh·∫≠n ngay <span class="font-bold text-white ml-1">x70 Key Cao C·∫•p</span></li>
                            <li class="flex items-center"><i class="fas fa-key mr-2 text-yellow-400"></i> **N·∫°p 500K**: nh·∫≠n ngay <span class="font-bold text-white ml-1">x150 Key Cao C·∫•p</span></li>
                        </ul>
                    </div>

                    <div class="p-3 bg-secondary-dark/50 rounded-lg">
                        <p class="text-xl font-extrabold text-accent-gold mb-3 flex items-center justify-center md:justify-start">
                            <i class="fas fa-bolt mr-2 text-accent-blue"></i> S·ª∞ KI·ªÜN N·∫†P TH∆Ø·ªûNG (Item)
                        </p>
                        <ul class="list-none space-y-2 text-slate-200 text-sm md:text-base pl-0">
                            <li class="flex items-center"><i class="fas fa-ticket-alt mr-2 text-accent-blue"></i> **N·∫°p 200K**: Nh·∫≠n ngay <span class="font-bold text-white ml-1">x20 V√© Cao C·∫•p</span></li>
                            <li class="flex items-center"><i class="fas fa-hat-wizard mr-2 text-accent-blue"></i> **N·∫°p 500K**: Nh·∫≠n ngay <span class="font-bold text-white ml-1">Ki·∫øm Huy·∫øt Nha</span></li>
                            <li class="flex items-center text-transparent">.</li> </ul>
                    </div>
                </div>
                
                <p class="text-sm md:text-base font-medium text-yellow-400 mt-5 pt-3 border-t border-slate-700/50">
                    *L∆∞u √Ω: Khuy·∫øn m√£i **Pha L√™ (10% cho 200K / 20% cho 500K)** v·∫´n ƒë∆∞·ª£c √°p d·ª•ng t·ª± ƒë·ªông cho t·ªïng n·∫°p c·ªßa b·∫°n.
                </p>
            </div>
            <div class="relative rounded-xl overflow-hidden border-2 border-promo-red/50 shadow-inner shadow-promo-red/50">
                <img id="eventImage" src="img_src/evvent1.png" 
                     onerror="this.onerror=null; this.src='https://placehold.co/1200x350/30184b/ffcc00?text=EVENT+BANNER+90+Ng%C3%A0y+V%C3%A0ng';" 
                     alt="Banner S·ª± Ki·ªán N·∫°p Th·∫ª" 
                     class="w-full object-cover max-h-96 hover:opacity-90 transition-opacity duration-300">
                
                <div class="absolute inset-0 bg-black/40 flex items-center justify-center pointer-events-none">
                     <p class="text-2xl md:text-3xl font-extrabold text-white p-3 rounded-lg backdrop-blur-sm tracking-wider">
                        <span class="text-promo-red">SI√äU ∆ØU ƒê√ÉI</span> | NH·∫¨N TH√äM V·∫¨T PH·∫®M MI·ªÑN PH√ç!
                    </p>
                </div>
            </div>
        </div>
        <div class="text-center mb-6 md:mb-8 animate-slide-up">
            <div class="flex justify-center gap-4 md:gap-6 flex-wrap text-sm md:text-base">
                <div class="promo-banner px-6 py-3 md:px-8 md:py-4 rounded-full text-primary-dark font-bold shadow-2xl tracking-wide">
                    <i class="fas fa-trophy mr-2"></i>C∆† H·ªòI NH·∫¨N PHA L√ä & V·∫¨T PH·∫®M KHUY·∫æN M√ÉI
                </div>
                <div class="stat-card px-6 py-3 md:px-8 md:py-4 rounded-full font-bold bg-secondary-dark border border-accent-blue/50 text-slate-300 shadow-md">
                    <i class="fas fa-shield-alt mr-2"></i>Giao D·ªãch An To√†n, T·ª± ƒê·ªông 24/7
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-10">
            
            <div class="lg:col-span-1 glass-effect p-6 md:p-8 rounded-3xl shadow-2xl glow-shadow-blue h-fit order-1 animate-slide-up">
                <div class="flex items-center justify-between mb-5 border-b border-accent-blue/50 pb-3">
                    <h3 class="text-xl md:text-2xl font-bold text-accent-blue tracking-wide">B∆Ø·ªöC 1: NH·∫¨P TH√îNG TIN</h3>
                    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full bg-accent-blue/20 flex items-center justify-center">
                        <span class="text-accent-blue font-bold text-xl md:text-2xl">1</span>
                    </div>
                </div>
                
                <form id="depositForm" class="space-y-6 md:space-y-7">
                    
                    <div>
                        <label for="username" class="block text-base md:text-lg font-semibold text-white mb-2 md:mb-3 flex items-center">
                            <i class="fas fa-user-circle mr-2 text-accent-blue"></i>
                            T√™n T√†i Kho·∫£n (In-game Name) <span class="text-red-400 ml-1">*</span>
                        </label>
                        <input type="text" id="username" name="username" required
                            class="custom-input w-full p-4 rounded-xl text-base md:text-lg placeholder-slate-500"
                            placeholder="Nh·∫≠p t√™n t√†i kho·∫£n c·ªßa b·∫°n (3-16 k√Ω t·ª±)"
                            pattern="[A-Za-z0-9_]{3,16}"
                            oninput="updateTransferContent()"> 
                        <p class="text-sm text-promo-red mt-2 flex items-center" id="usernameError">
                            <i class="fas fa-exclamation-circle mr-1 hidden" id="errorIcon"></i>
                        </p>
                    </div>

                    <div class="glass-effect p-5 md:p-6 rounded-xl border-2 border-bidv-green/70 hover:shadow-xl hover:shadow-bidv-green/40 transition duration-300">
                        <h4 class="text-lg md:text-xl font-bold text-accent-gold mb-3 flex items-center">
                            <i class="fas fa-university mr-2"></i>
                            Th√¥ng tin t√†i kho·∫£n nh·∫≠n
                        </h4>
                        <div class="space-y-3 text-slate-200 text-sm md:text-base">
                            <p class="flex justify-between items-center"><i class="fas fa-building w-5 text-bidv-green"></i> Ng√¢n h√†ng: <span class="font-bold ml-2 text-bidv-green">BIDV</span></p>
                            <p class="flex justify-between items-center"><i class="fas fa-credit-card w-5 text-bidv-green"></i> S·ªë TK: <span class="text-accent-gold font-bold ml-2 text-xl" id="accountNoDisplay">8890956287</span></p>
                            <p class="flex justify-between items-center"><i class="fas fa-user-circle w-5 text-bidv-green"></i> Ch·ªß TK: <span class="text-bidv-green font-bold ml-2" id="accountNameDisplay">DOAN CHI BAO</span></p>
                        </div>
                        <div class="mt-5 p-3 bg-yellow-500/15 rounded-lg border border-yellow-400/50">
                            <p class="text-xs md:text-sm text-yellow-400 flex items-start">
                                <i class="fas fa-exclamation-triangle mt-1 mr-2 flex-shrink-0"></i>
                                <span>L∆∞u √Ω: Lu√¥n ki·ªÉm tra k·ªπ th√¥ng tin tr∆∞·ªõc khi chuy·ªÉn. H·ªá th·ªëng t·ª± ƒë·ªông x·ª≠ l√Ω.</span>
                            </p>
                        </div>
                    </div>

                    <div class="pt-2">
                        <button type="button" onclick="generateQR()"
                            class="btn-generate w-full bg-gradient-to-r from-accent-blue to-blue-700 hover:from-blue-700 hover:to-accent-blue text-white text-xl md:text-2xl font-bold py-4 rounded-xl transition duration-300 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed relative z-10 tracking-wider"
                            id="generateQrButton" disabled>
                            <i class="fas fa-qrcode mr-2"></i>
                            B∆Ø·ªöC 2: T·∫†O M√É QR
                        </button>
                    </div>

                </form>

            </div>

            <div class="lg:col-span-2 glass-effect p-6 md:p-8 rounded-3xl shadow-2xl glow-shadow-gold h-fit order-2 animate-slide-up">
                <div class="text-center mb-6">
                    <h3 class="text-2xl md:text-3xl lg:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-promo-red via-accent-gold to-promo-red mb-2 tracking-wider">
                        CH·ªåN G√ìI N·∫†P & T√çNH TO√ÅN
                    </h3>
                    <p class="text-slate-400 text-sm md:text-base">Nh·∫≠p s·ªë l∆∞·ª£ng g√≥i b·∫°n mu·ªën mua ƒë·ªÉ xem t·ªïng Pha L√™</p>
                </div>
                
                <div class="overflow-x-auto table-scroll-wrapper"> 
                    <table class="min-w-full text-left text-base font-light table-auto">
                        <thead class="border-b-2 font-bold border-accent-gold/70 text-accent-gold">
                            <tr>
                                <th scope="col" class="px-3 md:px-5 py-3 text-sm md:text-base"><i class="fas fa-coins mr-2"></i>M·ªÜNH GI√Å</th>
                                <th scope="col" class="px-3 md:px-5 py-3 text-sm md:text-base"><i class="fas fa-gem mr-2"></i>PHA L√ä G·ªêC</th>
                                <th scope="col" class="px-3 md:px-5 py-3 text-sm md:text-base text-center"><i class="fas fa-shopping-cart mr-2"></i>S·ªê L∆Ø·ª¢NG</th>
                                <th scope="col" class="px-3 md:px-5 py-3 text-sm md:text-base text-right"><i class="fas fa-calculator mr-2"></i>T·∫†M T√çNH</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="package-row border-b border-slate-700/60" data-price="10000" data-crystal="1">
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 font-semibold text-white text-base">10.000 VNƒê</td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-accent-gold font-bold flex items-center text-base">
                                    <i class="fas fa-gem mr-2"></i>1
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-xl overflow-hidden w-32 md:w-36 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-2 text-center text-base text-white" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-right text-accent-blue font-bold text-base" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/60" data-price="50000" data-crystal="5">
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 font-semibold text-white text-base">50.000 VNƒê</td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-accent-gold font-bold flex items-center text-base">
                                    <i class="fas fa-gem mr-2"></i>5
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-xl overflow-hidden w-32 md:w-36 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-2 text-center text-base text-white" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-right text-accent-blue font-bold text-base" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/60" data-price="100000" data-crystal="10">
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 font-semibold text-white text-base">100.000 VNƒê</td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-accent-gold font-bold flex items-center text-base">
                                    <i class="fas fa-gem mr-2"></i>10
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-xl overflow-hidden w-32 md:w-36 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-2 text-center text-base text-white" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-right text-accent-blue font-bold text-base" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/60" data-price="200000" data-crystal="20">
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 font-semibold text-white text-base">
                                    200.000 VNƒê
                                    <span class="ml-2 text-xs bg-yellow-500/30 text-yellow-400 px-2 py-0.5 rounded-full font-extrabold">+10% BONUS</span>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-accent-gold font-bold flex items-center text-base">
                                    <i class="fas fa-gem mr-2"></i>20
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-xl overflow-hidden w-32 md:w-36 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-2 text-center text-base text-white" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-right text-accent-blue font-bold text-base" data-temp-price>0 VNƒê</td>
                            </tr>
                            <tr class="package-row border-b border-slate-700/60" data-price="500000" data-crystal="50">
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 font-semibold text-white text-base">
                                    500.000 VNƒê
                                    <span class="ml-2 text-xs bg-red-500/30 text-promo-red px-2 py-0.5 rounded-full font-extrabold">+20% BEST DEAL</span>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-accent-gold font-bold flex items-center text-base">
                                    <i class="fas fa-gem mr-2"></i>50
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4">
                                    <div class="flex items-center justify-between border border-slate-600 rounded-xl overflow-hidden w-32 md:w-36 mx-auto">
                                        <button type="button" class="quantity-control-btn" onclick="decreaseQuantity(this)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" min="0" value="0" class="quantity-input w-full p-2 text-center text-base text-white" oninput="calculateTotal()">
                                        <button type="button" class="quantity-control-btn" onclick="increaseQuantity(this)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </td>
                                <td class="whitespace-nowrap px-3 md:px-5 py-4 text-right text-accent-blue font-bold text-base" data-temp-price>0 VNƒê</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mt-8 glass-effect p-5 md:p-7 rounded-2xl border-2 border-accent-gold/70 glow-shadow-gold">
                    <div class="flex justify-between items-center text-lg md:text-xl font-semibold py-3 border-b border-slate-700/60">
                        <span class="flex items-center"><i class="fas fa-money-bill-wave mr-3 text-accent-blue"></i>T·ªîNG S·ªê TI·ªÄN N·∫†P:</span>
                        <span id="totalAmountDisplay" class="text-accent-blue font-bold text-2xl md:text-3xl">0 VNƒê</span>
                    </div>
                    <div class="flex justify-between items-center text-lg md:text-xl font-semibold py-3 border-b border-slate-700/60">
                        <span class="flex items-center"><i class="fas fa-gem mr-3 text-accent-gold"></i>T·ªîNG PHA L√ä G·ªêC:</span>
                        <span id="baseCrystalContainer" class="text-accent-gold font-bold text-2xl md:text-3xl">
                            <span id="baseCrystalDisplay">0</span>
                            <i class="fas fa-gem ml-1 text-base"></i>
                        </span>
                    </div>

                    <div id="promoSection" class="hidden">
                         <div class="flex justify-between items-center text-base md:text-lg font-medium py-3 bg-promo-red/20 rounded-lg px-4 my-3 border border-promo-red/50">
                            <span class="flex items-center"><i class="fas fa-gift mr-3 text-promo-red"></i>KHUY·∫æN M√ÉI (<span id="promoPercentDisplay">0%</span>):</span>
                            <span id="promoCrystalContainer" class="text-promo-red font-bold text-xl md:text-2xl">
                                + <span id="promoCrystalDisplay">0</span>
                                <i class="fas fa-gem ml-1 text-base"></i>
                            </span>
                        </div>
                    </div>
                    
                    <div class="flex justify-between text-2xl md:text-3xl font-extrabold pt-4 border-t border-slate-700/60 mt-2">
                        <span>T·ªîNG PHA L√ä NH·∫¨N:</span>
                        <span id="finalCrystalContainer" class="text-promo-red flex items-center space-x-2">
                            <span id="finalCrystalDisplay" class="text-3xl md:text-4xl">0</span>
                            <img src="img_src/phalevip.png" 
                            onerror="this.onerror=null; this.src='https://placehold.co/32x32/ffcc00/0d111c?text=üíé';"
                            alt="Pha L√™" class="h-8 w-8 md:h-10 md:w-10 object-contain animate-pulse-event">
                        </span>
                    </div>
                </div>

            </div>
        </div>

        <div id="qrCodeSection" class="mt-10 md:mt-12 p-8 md:p-10 bg-secondary-dark rounded-3xl shadow-2xl border-2 border-bidv-green/70 hidden animate-slide-up">
            <h3 class="text-2xl md:text-3xl font-bold text-promo-red text-center mb-6 md:mb-8 tracking-wider">B∆Ø·ªöC 3: QU√âT M√É V√Ä CHUY·ªÇN KHO·∫¢N</h3>
            
            <div class="flex flex-col lg:flex-row items-center justify-center gap-8 md:gap-10">
                
                <div class="w-56 h-56 md:w-72 md:h-72 border-4 border-accent-gold rounded-xl p-3 bg-white flex items-center justify-center qr-container" id="qrContainer">
                    <p class="text-sm text-center text-primary-dark font-medium">QR s·∫Ω hi·ªán t·∫°i ƒë√¢y</p>
                </div>
                
                <div class="text-left space-y-5 w-full lg:w-auto lg:max-w-lg">
                    <div class="p-3 bg-primary-dark rounded-xl border border-accent-blue/50">
                        <p class="text-lg md:text-xl font-semibold text-white">S·ªë ti·ªÅn c·∫ßn chuy·ªÉn:</p>
                        <p class="text-4xl md:text-5xl font-extrabold text-promo-red mt-1" id="transferAmount">0 VNƒê</p>
                    </div>
                    
                    <div class="p-3 bg-primary-dark rounded-xl border border-promo-red/50">
                        <p class="text-lg md:text-xl font-semibold text-white">N·ªôi dung chuy·ªÉn kho·∫£n **(C·ª±c k·ª≥ quan tr·ªçng)**:</p>
                        <div class="overflow-x-auto mt-1">
                            <p class="text-xl md:text-2xl font-extrabold text-red-400 bg-secondary-dark p-3 rounded-lg border border-red-400 inline-block break-all select-all" id="transferContent">
                                Vui l√≤ng nh·∫≠p T√™n T√†i Kho·∫£n
                            </p>
                        </div>
                    </div>
                    <p class="text-sm md:text-base text-yellow-400 mt-2 flex items-start">
                        <i class="fas fa-exclamation-triangle mt-1 mr-2 flex-shrink-0 text-promo-red"></i>
                        Tuy·ªát ƒë·ªëi **KH√îNG CH·ªàNH S·ª¨A** n·ªôi dung. M√£ n√†y l√† duy nh·∫•t cho giao d·ªãch c·ªßa b·∫°n.
                    </p>
                </div>
            </div>
        </div>

    </main>

    <footer class="w-full bg-secondary-dark border-t border-accent-gold/30 py-6 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center text-slate-400 text-xs md:text-sm">
            <p>&copy; 2025 C·ª≠a H√†ng SkyHunter. TK BIDV: <span id="footerAccountNo">8890956287</span> <span id="footerAccountName">DOAN CHI BAO</span>. M√£ QR c√≥ hi·ªáu l·ª±c trong 30 ph√∫t. Vui l√≤ng li√™n h·ªá h·ªó tr·ª£ n·∫øu g·∫∑p l·ªói.</p>
        </div>
    </footer>

    <script>
    const BANK_ID = 'BIDV';
    const ACCOUNT_NO = '8890956287';
    const ACCOUNT_NAME = 'DOAN CHI BAO';
    const PREFIX = 'NapPlayer'; // Ti·ªÅn t·ªë c·ªë ƒë·ªãnh

    const PROMO_THRESHOLD_500K = 500000;
    const PROMO_PERCENT_500K = 0.20;

    const PROMO_THRESHOLD_200K = 200000;
    const PROMO_PERCENT_200K = 0.10;

    // C·∫≠p nh·∫≠t th√¥ng tin TK
    document.getElementById('accountNoDisplay').textContent = ACCOUNT_NO;
    document.getElementById('accountNameDisplay').textContent = ACCOUNT_NAME;
    document.getElementById('footerAccountNo').textContent = ACCOUNT_NO;
    document.getElementById('footerAccountName').textContent = ACCOUNT_NAME;

    const usernameInput = document.getElementById('username');
    const generateQrButton = document.getElementById('generateQrButton');
    const usernameError = document.getElementById('usernameError');
    const errorIcon = document.getElementById('errorIcon');
    const packageRows = document.querySelectorAll('tbody tr');
    const qrContainer = document.getElementById('qrContainer');
    const qrSection = document.getElementById('qrCodeSection');


    let totalAmount = 0;
    let finalContent = '';
    let finalCrystalGlobal = 0;

    function formatVND(amount) {
        return Number(amount).toLocaleString('vi-VN') + ' VNƒê';
    }
    
    // H√†m ƒë·ªãnh d·∫°ng s·ªë Pha L√™
    function formatCrystal(crystal) {
        return Number(crystal).toLocaleString('vi-VN');
    }

    /**
     * TƒÉng s·ªë l∆∞·ª£ng c·ªßa input li√™n quan.
     */
    function increaseQuantity(button) {
        const input = button.closest('.flex').querySelector('input[type="number"]');
        let quantity = parseInt(input.value) || 0;
        input.value = quantity + 1;
        calculateTotal();
    }

    /**
     * Gi·∫£m s·ªë l∆∞·ª£ng c·ªßa input li√™n quan.
     */
    function decreaseQuantity(button) {
        const input = button.closest('.flex').querySelector('input[type="number"]');
        let quantity = parseInt(input.value) || 0;
        if (quantity > 0) {
            input.value = quantity - 1;
            calculateTotal();
        }
    }


    function calculateTotal() {
        totalAmount = 0;
        let baseCrystal = 0;

        packageRows.forEach(row => {
            const price = parseInt(row.getAttribute('data-price'));
            const crystal = parseInt(row.getAttribute('data-crystal'));
            const quantityInput = row.querySelector('input[type="number"]');
            let quantity = parseInt(quantityInput.value) || 0;

            if (quantity < 0) {
                quantity = 0;
                quantityInput.value = 0;
            }

            const tempPrice = price * quantity;
            const tempCrystal = crystal * quantity;

            totalAmount += tempPrice;
            baseCrystal += tempCrystal;

            row.querySelector('[data-temp-price]').textContent = formatVND(tempPrice);
        });

        let promoCrystal = 0;
        let promoPercent = 0;

        // Logic khuy·∫øn m√£i Pha L√™ v·∫´n gi·ªØ nguy√™n nh∆∞ c≈© (10% v√† 20%)
        if (totalAmount >= PROMO_THRESHOLD_500K) {
            promoPercent = PROMO_PERCENT_500K;
        } else if (totalAmount >= PROMO_THRESHOLD_200K) {
            promoPercent = PROMO_PERCENT_200K;
        }

        if (promoPercent > 0) {
            promoCrystal = Math.floor(baseCrystal * promoPercent);
            document.getElementById('promoSection').classList.remove('hidden');
            document.getElementById('promoPercentDisplay').textContent = `${Math.round(promoPercent * 100)}%`;
        } else {
            document.getElementById('promoSection').classList.add('hidden');
            document.getElementById('promoPercentDisplay').textContent = `0%`;
        }

        const finalCrystal = baseCrystal + promoCrystal;
        finalCrystalGlobal = finalCrystal; 

        document.getElementById('totalAmountDisplay').textContent = formatVND(totalAmount);
        
        document.getElementById('baseCrystalDisplay').textContent = formatCrystal(baseCrystal);
        document.getElementById('promoCrystalDisplay').textContent = formatCrystal(promoCrystal);
        document.getElementById('finalCrystalDisplay').textContent = formatCrystal(finalCrystal);

        updateTransferContent(); 
    }

    function updateTransferContent() {
        const username = usernameInput.value.trim();
        // Bi·ªÉu th·ª©c ch√≠nh quy cho t√™n ng∆∞·ªùi d√πng: 3-16 k√Ω t·ª±, ch·ªâ ch·ª©a ch·ªØ, s·ªë, g·∫°ch d∆∞·ªõi.
        const isValidUsername = /^[A-Za-z0-9_]{3,16}$/.test(username); 

        // Ki·ªÉm tra ƒëi·ªÅu ki·ªán: T·ªïng ti·ªÅn > 0 V√Ä T√™n t√†i kho·∫£n h·ª£p l·ªá
        if (totalAmount > 0 && isValidUsername) {

            // C·∫≠p nh·∫≠t n·ªôi dung chuy·ªÉn kho·∫£n m·ªõi
            finalContent = `${PREFIX}${username}`; // N·ªôi dung chuy·ªÉn kho·∫£n: NapPlayer[Username]
            document.getElementById('transferContent').textContent = finalContent;
            generateQrButton.disabled = false; // K√≠ch ho·∫°t n√∫t
            usernameError.textContent = '';
            errorIcon.classList.add('hidden');
        } else if (!isValidUsername && username.length > 0) {
            // T√™n kh√¥ng h·ª£p l·ªá
            document.getElementById('transferContent').textContent = 'T√™n T√†i Kho·∫£n kh√¥ng h·ª£p l·ªá';
            usernameError.textContent = 'T√™n t√†i kho·∫£n kh√¥ng h·ª£p l·ªá (3-16 k√Ω t·ª±, ch·ªâ ch·ª©a ch·ªØ, s·ªë, g·∫°ch d∆∞·ªõi).';
            errorIcon.classList.remove('hidden');
            generateQrButton.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t
            qrSection.classList.add('hidden');
        } else {
            // T·ªïng ti·ªÅn = 0 ho·∫∑c t√™n tr·ªëng/ch∆∞a ho√†n th√†nh
            document.getElementById('transferContent').textContent = (isValidUsername && totalAmount === 0) 
                ? 'Vui l√≤ng ch·ªçn g√≥i n·∫°p' 
                : 'Vui l√≤ng nh·∫≠p T√™n T√†i Kho·∫£n';
            usernameError.textContent = '';
            errorIcon.classList.add('hidden');
            generateQrButton.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t
            qrSection.classList.add('hidden');
        }
    }

    function generateQR() {
        if (totalAmount === 0 || generateQrButton.disabled) {
            alert("Vui l√≤ng ch·ªçn g√≥i n·∫°p v√† nh·∫≠p t√™n t√†i kho·∫£n h·ª£p l·ªá.");
            return;
        }

        const content = finalContent;

        // URL QR code
        const qrUrl =
            `https://img.vietqr.io/image/${BANK_ID}-${ACCOUNT_NO}-compact.png?amount=${totalAmount}&addInfo=${encodeURIComponent(content)}&accountName=${encodeURIComponent(ACCOUNT_NAME)}`;

        qrContainer.innerHTML = ''; 

        const newQrImage = document.createElement('img');
        newQrImage.id = 'qrImage';
        newQrImage.src = qrUrl;
        newQrImage.alt = 'QR Chuy·ªÉn Kho·∫£n';
        newQrImage.className = 'w-full h-full object-contain';
        newQrImage.style.display = 'block';

        qrContainer.appendChild(newQrImage);
        qrContainer.classList.add('bg-white', 'p-4');
        qrContainer.classList.remove('flex', 'items-center', 'justify-center');

        document.getElementById('transferAmount').textContent = formatVND(totalAmount);
        qrSection.classList.remove('hidden');

        qrSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    document.addEventListener('DOMContentLoaded', () => {
        calculateTotal();
        usernameInput.addEventListener('input', updateTransferContent);
    });
</script>
</body>
</html>